{"ast":null,"code":"import _toConsumableArray from \"/Users/simranbhamra/Documents/cinemates/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/Users/simranbhamra/Documents/cinemates/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { useSafeLayoutEffect } from \"@chakra-ui/hooks\";\nimport { fromEntries } from \"@chakra-ui/utils\";\nimport { createPopper as defaultCreatePopper } from \"@popperjs/core\";\nimport { dequal } from \"dequal\";\nimport * as React from \"react\";\n\nfunction resolve(obj, elements) {\n  return function (prev) {\n    var next = fromEntries(elements.map(function (element) {\n      return [element, obj[element]];\n    }));\n    var isPopperEqual = dequal(prev.popper, next.popper);\n    var isArrowEqual = dequal(prev.arrow, next.arrow);\n    if (isArrowEqual && isPopperEqual) return prev;\n    return next;\n  };\n}\n\nvar EMPTY_MODIFIERS = [];\nexport function usePopper(referenceElement, popperElement, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      _options$enabled = _options.enabled,\n      enabled = _options$enabled === void 0 ? true : _options$enabled;\n  var prevOptions = React.useRef(null);\n  var optionsWithDefaults = {\n    onFirstUpdate: options.onFirstUpdate,\n    placement: options.placement || \"bottom\",\n    strategy: options.strategy || \"absolute\",\n    modifiers: options.modifiers || EMPTY_MODIFIERS\n  };\n\n  var _React$useState = React.useState(null),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      popperState = _React$useState2[0],\n      setPopperState = _React$useState2[1];\n\n  var _React$useState3 = React.useState({\n    popper: {\n      position: optionsWithDefaults.strategy,\n      left: \"0\",\n      top: \"0\"\n    }\n  }),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      styles = _React$useState4[0],\n      setStyles = _React$useState4[1];\n\n  var _React$useState5 = React.useState({}),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      attrs = _React$useState6[0],\n      setAttrs = _React$useState6[1];\n\n  var updateStateModifier = React.useMemo(function () {\n    return {\n      name: \"updateState\",\n      enabled: true,\n      phase: \"write\",\n      fn: function fn(_ref) {\n        var state = _ref.state;\n        var elements = Object.keys(state.elements);\n        setPopperState(state);\n        setStyles(resolve(state.styles, elements));\n        setAttrs(resolve(state.attributes, elements));\n      },\n      requires: [\"computeStyles\"]\n    };\n  }, []);\n  var popperOptions = React.useMemo(function () {\n    var newOptions = {\n      onFirstUpdate: optionsWithDefaults.onFirstUpdate,\n      placement: optionsWithDefaults.placement,\n      strategy: optionsWithDefaults.strategy,\n      modifiers: [].concat(_toConsumableArray(optionsWithDefaults.modifiers), [updateStateModifier, {\n        name: \"applyStyles\",\n        enabled: false\n      }])\n    };\n\n    if (dequal(prevOptions.current, newOptions)) {\n      return prevOptions.current || newOptions;\n    }\n\n    prevOptions.current = newOptions;\n    return newOptions;\n  }, [optionsWithDefaults.onFirstUpdate, optionsWithDefaults.placement, optionsWithDefaults.strategy, optionsWithDefaults.modifiers, updateStateModifier]);\n  var popperInstanceRef = React.useRef();\n  useSafeLayoutEffect(function () {\n    if (popperInstanceRef.current) {\n      popperInstanceRef.current.setOptions(popperOptions);\n    }\n  }, [popperOptions]);\n  useSafeLayoutEffect(function () {\n    if (!enabled || referenceElement == null || popperElement == null) {\n      return;\n    }\n\n    var createPopper = options.createPopper || defaultCreatePopper;\n    var popperInstance = createPopper(referenceElement, popperElement, popperOptions);\n    popperInstanceRef.current = popperInstance;\n    return function () {\n      popperInstance.destroy();\n      popperInstanceRef.current = null;\n    };\n  }, [enabled, referenceElement, popperElement, options.createPopper]);\n  React.useEffect(function () {\n    var id = requestAnimationFrame(function () {\n      var _popperInstanceRef$cu;\n\n      (_popperInstanceRef$cu = popperInstanceRef.current) == null ? void 0 : _popperInstanceRef$cu.forceUpdate();\n    });\n    return function () {\n      cancelAnimationFrame(id);\n    };\n  }, []);\n  return {\n    state: popperState || null,\n    styles: styles,\n    attributes: attrs,\n    update: popperInstanceRef.current ? popperInstanceRef.current.update : null,\n    forceUpdate: popperInstanceRef.current ? popperInstanceRef.current.forceUpdate : null\n  };\n}","map":{"version":3,"sources":["../../src/react-popper.ts"],"names":["createPopper","prev","next","fromEntries","elements","element","obj","isPopperEqual","dequal","isArrowEqual","EMPTY_MODIFIERS","options","enabled","prevOptions","React","optionsWithDefaults","onFirstUpdate","placement","strategy","modifiers","popper","position","left","top","updateStateModifier","name","phase","fn","state","Object","setPopperState","setStyles","resolve","setAttrs","requires","popperOptions","newOptions","popperInstanceRef","useSafeLayoutEffect","referenceElement","popperElement","popperInstance","id","requestAnimationFrame","cancelAnimationFrame","popperState","styles","attributes","update","forceUpdate"],"mappings":"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","sourcesContent":["import { useSafeLayoutEffect } from \"@chakra-ui/hooks\"\nimport { fromEntries } from \"@chakra-ui/utils\"\nimport {\n  createPopper as defaultCreatePopper,\n  Instance,\n  Modifier,\n  Options as PopperOptions,\n  VirtualElement,\n  State as PopperState,\n} from \"@popperjs/core\"\nimport { dequal } from \"dequal\"\nimport * as React from \"react\"\n\ntype Options = Partial<PopperOptions> & {\n  enabled?: boolean\n  createPopper?: typeof defaultCreatePopper\n}\n\ntype State = {\n  styles: {\n    [key: string]: Partial<React.CSSProperties>\n  }\n  attributes: {\n    [key: string]: { [key: string]: string }\n  }\n}\n\nfunction resolve(obj: any, elements: string[]) {\n  return (prev: any) => {\n    const next = fromEntries(\n      elements.map((element) => [element, obj[element]]),\n    ) as any\n\n    const isPopperEqual = dequal(prev.popper, next.popper)\n    const isArrowEqual = dequal(prev.arrow, next.arrow)\n\n    if (isArrowEqual && isPopperEqual) return prev\n    return next\n  }\n}\n\nconst EMPTY_MODIFIERS: any[] = []\n\nexport function usePopper(\n  referenceElement: Element | VirtualElement,\n  popperElement: HTMLElement,\n  options: Options = {},\n) {\n  const { enabled = true } = options\n\n  const prevOptions = React.useRef<any>(null)\n\n  const optionsWithDefaults = {\n    onFirstUpdate: options.onFirstUpdate,\n    placement: options.placement || \"bottom\",\n    strategy: options.strategy || \"absolute\",\n    modifiers: options.modifiers || EMPTY_MODIFIERS,\n  }\n\n  const [popperState, setPopperState] = React.useState<PopperState | null>(null)\n  const [styles, setStyles] = React.useState<State[\"styles\"]>({\n    popper: {\n      position: optionsWithDefaults.strategy,\n      left: \"0\",\n      top: \"0\",\n    },\n  })\n\n  const [attrs, setAttrs] = React.useState<State[\"attributes\"]>({})\n\n  const updateStateModifier: Modifier<\"updateState\", any> = React.useMemo(\n    () => ({\n      name: \"updateState\",\n      enabled: true,\n      phase: \"write\",\n      fn: ({ state }) => {\n        const elements = Object.keys(state.elements)\n\n        setPopperState(state)\n\n        setStyles(resolve(state.styles, elements))\n        setAttrs(resolve(state.attributes, elements))\n      },\n      requires: [\"computeStyles\"],\n    }),\n    [],\n  )\n\n  const popperOptions = React.useMemo(() => {\n    const newOptions = {\n      onFirstUpdate: optionsWithDefaults.onFirstUpdate,\n      placement: optionsWithDefaults.placement,\n      strategy: optionsWithDefaults.strategy,\n      modifiers: [\n        ...optionsWithDefaults.modifiers,\n        updateStateModifier,\n        { name: \"applyStyles\", enabled: false },\n      ],\n    }\n\n    if (dequal(prevOptions.current, newOptions)) {\n      return prevOptions.current || newOptions\n    }\n\n    prevOptions.current = newOptions\n    return newOptions\n  }, [\n    optionsWithDefaults.onFirstUpdate,\n    optionsWithDefaults.placement,\n    optionsWithDefaults.strategy,\n    optionsWithDefaults.modifiers,\n    updateStateModifier,\n  ])\n\n  const popperInstanceRef = React.useRef<Instance | null>()\n\n  useSafeLayoutEffect(() => {\n    if (popperInstanceRef.current) {\n      popperInstanceRef.current.setOptions(popperOptions)\n    }\n  }, [popperOptions])\n\n  useSafeLayoutEffect(() => {\n    if (!enabled || referenceElement == null || popperElement == null) {\n      return\n    }\n\n    const createPopper = options.createPopper || defaultCreatePopper\n    const popperInstance = createPopper(\n      referenceElement,\n      popperElement,\n      popperOptions,\n    )\n\n    popperInstanceRef.current = popperInstance\n\n    return () => {\n      popperInstance.destroy()\n      popperInstanceRef.current = null\n    }\n  }, [enabled, referenceElement, popperElement, options.createPopper])\n\n  React.useEffect(() => {\n    const id = requestAnimationFrame(() => {\n      popperInstanceRef.current?.forceUpdate()\n    })\n    return () => {\n      cancelAnimationFrame(id)\n    }\n  }, [])\n\n  return {\n    state: popperState || null,\n    styles,\n    attributes: attrs,\n    update: popperInstanceRef.current ? popperInstanceRef.current.update : null,\n    forceUpdate: popperInstanceRef.current\n      ? popperInstanceRef.current.forceUpdate\n      : null,\n  }\n}\n"]},"metadata":{},"sourceType":"module"}