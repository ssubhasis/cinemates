{"ast":null,"code":"import _classCallCheck from\"/Users/simranbhamra/Documents/cinemates/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/simranbhamra/Documents/cinemates/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/simranbhamra/Documents/cinemates/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/simranbhamra/Documents/cinemates/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{GridItem,Box,Text,Heading,Button}from\"@chakra-ui/react\";import axios from'axios';import DeleteComment from'./DeleteComment';import{Editable,EditableInput,EditablePreview}from\"@chakra-ui/react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserComments=/*#__PURE__*/function(_React$Component){_inherits(UserComments,_React$Component);var _super=_createSuper(UserComments);function UserComments(props){var _this;_classCallCheck(this,UserComments);_this=_super.call(this,props);_this.handleChangeComment=function(e){_this.state.cmnt=e;console.log(_this.state.cmnt+\"!!\");};_this.state={title_id:_this.props.id,comments:[],del_comnt:[],cmnt:''};//this.handleDelete = this.handleDelete.bind(this);\nreturn _this;}_createClass(UserComments,[{key:\"getComments\",value:function getComments(){var _this2=this;console.log(this.state.title_id);var api='http://18.206.168.148:5000/movie/'+this.state.title_id;fetch(api).then(function(response){return response.json();}).then(function(response){console.log(response.user_comments);if(response.user_comments===undefined)_this2.setState({comments:[]});else _this2.setState({comments:response.user_comments});console.log(response);});}},{key:\"componentDidMount\",value:function componentDidMount(){this.getComments();}},{key:\"handleDelete\",value:function handleDelete(title_id,cmnt_id){console.log(title_id,cmnt_id);DeleteComment(title_id,cmnt_id);window.location.reload(false);}},{key:\"updateComment\",value:function updateComment(id,cmnt,cmnt_id){var request_option={method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({\"titleId\":id,\"userId\":\"ui00001\",\"userComment\":this.state.cmnt,'comment_seq':cmnt_id})};fetch('http://18.206.168.148:5000/movie/post-comment',request_option).then(function(res){return res.json();}).then(function(resp){console.log(resp);});console.log(cmnt);}},{key:\"render\",value:function render(){var _this3=this;console.log(this.state);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Text,{textAlign:\"left\",color:\"white\",children:\" User Comments\"}),this.state.comments.map(function(cmnt,index){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(Box,{bg:\"white\",p:\"5px\",borderRadius:\"md\",children:[/*#__PURE__*/_jsxs(Text,{textAlign:\"left\",color:\"blue\",children:[cmnt.user_id,\" : \"]}),/*#__PURE__*/_jsxs(Editable,{defaultValue:cmnt.user_comment,onChange:_this3.handleChangeComment,children:[/*#__PURE__*/_jsx(EditablePreview,{}),/*#__PURE__*/_jsx(EditableInput,{})]}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){_this3.updateComment(_this3.state.title_id,cmnt.user_comment,cmnt.comment_seq);},children:\" Save\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){_this3.handleDelete(_this3.state.title_id,cmnt.comment_seq);},children:\" Delete \"})]})]},cmnt.titleId);})]});}}]);return UserComments;}(React.Component);export{UserComments as default};","map":{"version":3,"sources":["/Users/simranbhamra/Documents/cinemates/src/Components/UserComments.js"],"names":["React","Component","GridItem","Box","Text","Heading","Button","axios","DeleteComment","Editable","EditableInput","EditablePreview","UserComments","props","handleChangeComment","e","state","cmnt","console","log","title_id","id","comments","del_comnt","api","fetch","then","response","json","user_comments","undefined","setState","getComments","cmnt_id","window","location","reload","request_option","method","headers","body","JSON","stringify","res","resp","map","index","user_id","user_comment","updateComment","comment_seq","handleDelete","titleId"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {GridItem,Box, Text, Heading,Button} from \"@chakra-ui/react\";\nimport axios from 'axios';\nimport DeleteComment from './DeleteComment';\nimport { Editable, EditableInput, EditablePreview } from \"@chakra-ui/react\"\n\nexport default class UserComments extends React.Component{\n    constructor(props) {\n        super(props);\n        this.state = { \n          title_id : this.props.id,\n          comments : [],\n          del_comnt : [],\n          cmnt:''\n        };\n       //this.handleDelete = this.handleDelete.bind(this);\n      }\n\n\n\n      getComments() {\n        console.log(this.state.title_id)\n        let api = 'http://18.206.168.148:5000/movie/' + this.state.title_id\n        fetch(api)\n          .then(response =>  response.json())\n          .then(response => {\n            console.log(response.user_comments)\n            if (response.user_comments===undefined) this.setState({ comments: []})\n            else this.setState({\n                comments: response.user_comments\n            })\n            console.log(response)\n          })\n      }\n\n      \n      componentDidMount() {\n        this.getComments(); \n      }\n\n      handleDelete(title_id,cmnt_id){\n        console.log(title_id,cmnt_id)\n        DeleteComment(title_id,cmnt_id)\n        window.location.reload(false);\n      } \n\n      handleChangeComment= (e) => {\n        this.state.cmnt =  e\n        console.log(this.state.cmnt + \"!!\")\n      } \n\n\n      updateComment(id,cmnt, cmnt_id){\n        const request_option = {\n          method : 'POST',\n          headers: {'Content-Type': 'application/json'},\n          body : JSON.stringify({\"titleId\": id, \"userId\": \"ui00001\", \"userComment\": this.state.cmnt, 'comment_seq': cmnt_id})\n        };\n\n        \n        fetch('http://18.206.168.148:5000/movie/post-comment',request_option)\n           .then(res => res.json())\n           .then((resp) => {console.log(resp)});\n         \n           console.log(cmnt)\n      }\n\n      render(){\n        console.log(this.state)\n          return (\n       <div>\n         <Text textAlign = \"left\" color = \"white\"> User Comments</Text>\n        {this.state.comments.map((cmnt, index) => (\n        <div key={cmnt.titleId}>\n          <br />\n           <Box bg=\"white\" p=\"5px\" borderRadius=\"md\">\n           <Text textAlign = \"left\" color = \"blue\">{cmnt.user_id} : </Text>\n          \n\n           <Editable defaultValue={cmnt.user_comment} onChange={this.handleChangeComment}>\n            <EditablePreview />\n            <EditableInput />\n          </Editable>\n\n           <Button  onClick={() => {this.updateComment(this.state.title_id, cmnt.user_comment ,cmnt.comment_seq) }}> Save</Button><br />\n            <Button onClick={() => { this.handleDelete(this.state.title_id,cmnt.comment_seq) }} > Delete </Button> \n           </Box>\n        </div>\n\n    ))}\n\n        </div>  \n        \n        \n          );\n      }\n\n\n\n}\n\n"]},"metadata":{},"sourceType":"module"}